<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ancdtl">

<select id="empAncDtl" parameterType="hashmap" resultType="hashmap">
		SELECT ID, NAME, PHONE, EMAIL, INFOR_AGR, ACT_AGR, M.MEM_NO, C.POS,
		CI.CORP_NO, CI.C_NAME, DEL_CHK, CI.C_BIZNO, CI.C_BOSS, CI.ADDR, CI.ADDR_DTL, CI.C_HPAGE, CI.ZIP, CI.CORP_IMG,
        SECTOR_NAME, ANC.SECTOR_NO, REGION_NO, RECRUIT_GBN, GRADU, MAJOR, CARR, PAY_GBN, PAY_LOW, PAY_HIGH, 
        EMP_GBN, DLINE, DTL, REG_DATE, EMP_TITLE, CARR_Y, EMP_PER, EMP_DOC, EMP_PRCS, ANC.EMP_NO, CITY_NO,
        ATTCH_NAME
		FROM MEMBER M JOIN C_MEMBER C ON (M.MEM_NO = C.MEM_NO)
		JOIN C_INFO CI ON ( C.CORP_NO = CI.CORP_NO)
        JOIN EMP_ANNC ANC ON (ANC.MEM_NO = M.MEM_NO)
        JOIN EMP_ATTCH EA ON (EA.EMP_NO = ANC.EMP_NO)
        JOIN SECTOR SC ON ( SC.SECTOR_NO = ANC.SECTOR_NO)
		AND ANC.EMP_NO = #{EMP_NO}
		AND DEL_CHK = 0 
	
<!-- 		SELECT M.ID, M.NAME, M.PHONE, M.EMAIL, M.INFOR_AGR, M.ACT_AGR, M.MEM_NO, C.POS,
		CI.CORP_NO, CI.C_NAME, ANC.DEL_CHK, CI.C_BIZNO, CI.C_BOSS, CI.ADDR, CI.ADDR_DTL, CI.C_HPAGE, CI.ZIP, CI.CORP_IMG,
        SC.SECTOR_NAME, ANC.REGION_NO, ANC.RECRUIT_GBN, ANC.GRADU, ANC.MAJOR, ANC.CARR, ANC.PAY_GBN, ANC.PAY_LOW, ANC.PAY_HIGH, 
        ANC.EMP_GBN, ANC.DLINE, ANC.DTL, ANC.REG_DATE, ANC.EMP_TITLE, ANC.CARR_Y, ANC.EMP_PER, ANC.EMP_DOC, ANC.EMP_PRCS, ANC.EMP_NO, ANC.CITY_NO,
        ATT.ATTCH_NAME, EQ.QUAL_NAME, QUAL.QUAL_NO
		FROM MEMBER M JOIN C_MEMBER C ON (M.MEM_NO = C.MEM_NO)
		JOIN C_INFO CI ON ( C.CORP_NO = CI.CORP_NO)
        JOIN EMP_ANNC ANC ON (ANC.MEM_NO = M.MEM_NO)
        JOIN (SELECT EMP_NO,ATTCH_NAME FROM EMP_ATTCH) ATT
        ON (ATT.EMP_NO = ANC.EMP_NO)
        JOIN SECTOR SC ON ( SC.SECTOR_NO = ANC.SECTOR_NO)
        JOIN EMP_QUAL EQ ON (ANC.EMP_NO = EQ.EMP_NO)
        JOIN (SELECT QUAL_NAME,QUAL_NO FROM QUAL) QUAL
                ON ( QUAL.QUAL_NO = EQ.QUAL_NO)
		AND ANC.EMP_NO = #{EMP_NO}
		AND ANC.DEL_CHK = 0 -->
</select>

<select id="qaulList" parameterType="hashmap" resultType="hashmap">
	SELECT EQ.QUAL_NO, QU.QUAL_NAME
	FROM EMP_QUAL EQ JOIN QUAL QU ON (EQ.QUAL_NO = QU.QUAL_NO) 
	WHERE EQ.EMP_NO = #{EMP_NO}		
</select>



<update id="uptEmpAnncAjax">
UPDATE EMP_ANNC SET EMP_TITLE = #{EMP_TITLE}, SECTOR_NO = #{SECTOR_NO}, EMP_PER = #{EMP_PER}, EMP_GBN = #{EMP_GBN}, PAY_LOW = #{PAY_LOW}, PAY_HIGH = #{PAY_HIGH}, 
GRADU = #{GRADU}, CARR = #{CARR}, CARR_Y = #{CARR_Y}, DTL= #{DTL}, REG_DATE = #{REG_DATE}, DLINE = #{DLINE}, REGION_NO = #{REGION_NO}, MAJOR = #{MAJOR}, RECRUIT = #{RECRUIT}, CITY_NO = #{CITY_NO}, 
EMP_DOC = #{EMP_DOC}, EMP_PRCS = #{EMP_PRCS}
WHERE EMP_NO = #{EMP_NO}
</update>



<update id="uptEmpQual">
UPDATE EMP_QUAL SET QUAL_NO = #{QUAL_NO}, QUAL_NAME = #{QUAL_NAME}
WHERE EMP_NO = #{EMP_NOO}
</update>



<update id="uptAttchFile">
UPDATE EMP_ATTCH SET ATTCH_NAME = #{ATTCH_NAME}
WHERE EMP_NO = #{EMP_NO}
</update>




</mapper>